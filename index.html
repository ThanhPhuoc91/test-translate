<!DOCTYPE html>
<html>
<head>
    <title>Dịch Trung - Việt (Pollinations.AI - GET)</title>
    <style>
        body { font-family: sans-serif; }
        #translated-text { border: 1px solid #ccc; padding: 20px; white-space: pre-wrap; width: 80%; max-width: 900px; margin: 20px auto; }
        .container { text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dịch Trung - Việt (Pollinations.AI - GET)</h1>
        <h2>Văn bản đã dịch:</h2>
        <div id="translated-text">
            Đang tải bản dịch...
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const translatedTextElement = document.getElementById('translated-text');
            const apiUrlBase = 'https://text.pollinations.ai/'; // Base URL của Pollinations.AI API

            // Lấy tham số 'text' từ URL
            const urlParams = new URLSearchParams(window.location.search);
            const chineseText = urlParams.get('text');

            if (!chineseText) {
                translatedTextElement.textContent = "Vui lòng cung cấp văn bản tiếng Trung cần dịch bằng cách thêm tham số '?text=' vào URL.";
                return; // Dừng nếu không có văn bản đầu vào
            }

            const encodedChineseText = encodeURIComponent(chineseText); // URL encode văn bản tiếng Trung
            const apiUrl = `${apiUrlBase}${encodedChineseText}?model=openai&system=Dịch đoạn văn bản sau sang tiếng Việt:`; // Tạo URL API đầy đủ

            fetch(apiUrl, { method: 'GET' }) // Sử dụng phương thức GET
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Lỗi HTTP! trạng thái: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.response) {
                        translatedTextElement.textContent = data.response.trim();
                    } else {
                        translatedTextElement.textContent = "Không thể dịch. Phản hồi không hợp lệ từ API.";
                    }
                })
                .catch(error => {
                    console.error("Lỗi khi gọi Pollinations.AI API:", error);
                    translatedTextElement.textContent = "Lỗi dịch thuật. Vui lòng thử lại sau.";
                });
        });
    </script>
</body>
</html>
